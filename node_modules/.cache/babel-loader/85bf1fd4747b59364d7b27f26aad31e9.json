{"ast":null,"code":"import _toConsumableArray from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React$1, { memo, useRef, useState, useCallback } from 'react';\nimport { useI18n } from '../../../../../../utilities/i18n/hooks.js';\nimport { CalendarMinor } from '@shopify/polaris-icons';\nimport { Icon as Icon$1 } from '../../../../../Icon/Icon.js';\nimport { TextField } from '../../../../../TextField/TextField.js';\nimport { DatePicker as DatePicker$1 } from '../../../../../DatePicker/DatePicker.js';\nimport { Select as Select$1 } from '../../../../../Select/Select.js';\nimport styles from './DateSelector.scss.js';\nvar VALID_DATE_REGEX = /^\\d{4}-\\d{1,2}-\\d{1,2}$/;\nvar DateFilterOption;\n\n(function (DateFilterOption) {\n  DateFilterOption[\"PastWeek\"] = \"past_week\";\n  DateFilterOption[\"PastMonth\"] = \"past_month\";\n  DateFilterOption[\"PastQuarter\"] = \"past_quarter\";\n  DateFilterOption[\"PastYear\"] = \"past_year\";\n  DateFilterOption[\"ComingWeek\"] = \"coming_week\";\n  DateFilterOption[\"ComingMonth\"] = \"coming_month\";\n  DateFilterOption[\"ComingQuarter\"] = \"coming_quarter\";\n  DateFilterOption[\"ComingYear\"] = \"coming_year\";\n  DateFilterOption[\"OnOrBefore\"] = \"on_or_before\";\n  DateFilterOption[\"OnOrAfter\"] = \"on_or_after\";\n})(DateFilterOption || (DateFilterOption = {}));\n\nvar _ref = /*#__PURE__*/React$1.createElement(Icon$1, {\n  source: CalendarMinor,\n  color: \"subdued\"\n});\n\nvar DateSelector = /*#__PURE__*/memo(function DateSelector(_ref2) {\n  var filterValue = _ref2.filterValue,\n      filterKey = _ref2.filterKey,\n      filterMinKey = _ref2.filterMinKey,\n      filterMaxKey = _ref2.filterMaxKey,\n      dateOptionType = _ref2.dateOptionType,\n      onFilterValueChange = _ref2.onFilterValueChange,\n      onFilterKeyChange = _ref2.onFilterKeyChange;\n  var now = new Date();\n  var i18n = useI18n();\n  var initialConsumerFilterKey = useRef(filterKey);\n\n  var _useState = useState(now.getMonth()),\n      _useState2 = _slicedToArray(_useState, 2),\n      datePickerMonth = _useState2[0],\n      setDatePickerMonth = _useState2[1];\n\n  var _useState3 = useState(now.getFullYear()),\n      _useState4 = _slicedToArray(_useState3, 2),\n      datePickerYear = _useState4[0],\n      setDatePickerYear = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedDate = _useState6[0],\n      setSelectedDate = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      userInputDate = _useState8[0],\n      setUserInputDate = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      userInputDateError = _useState10[0],\n      setUserInputDateError = _useState10[1];\n\n  var dateTextFieldValue = getDateTextFieldValue();\n  var handleDateFieldChange = useCallback(function (value) {\n    if (value.length === 0) {\n      setSelectedDate(undefined);\n      onFilterValueChange(undefined);\n    }\n\n    if (userInputDateError && isValidDate(value)) {\n      setUserInputDateError(undefined);\n    }\n\n    setUserInputDate(value);\n  }, [onFilterValueChange, userInputDateError]);\n  var handleDateChanged = useCallback(function (date) {\n    if (!date) {\n      return;\n    }\n\n    onFilterValueChange(stripTimeFromISOString(formatDateForLocalTimezone(date)));\n  }, [onFilterValueChange]);\n  var handleDateBlur = useCallback(function () {\n    if (!dateTextFieldValue || !isValidDate(dateTextFieldValue)) {\n      setSelectedDate(undefined);\n      setUserInputDateError(i18n.translate('Polaris.ResourceList.DateSelector.dateValueError'));\n      onFilterValueChange(undefined);\n      return;\n    }\n\n    if (!userInputDate) {\n      return;\n    }\n\n    var formattedDateForTimezone = new Date(formatDateForLocalTimezone(new Date(userInputDate)));\n    setSelectedDate(formattedDateForTimezone);\n    setDatePickerMonth(formattedDateForTimezone.getMonth());\n    setDatePickerYear(formattedDateForTimezone.getFullYear());\n    setUserInputDate(undefined);\n    setUserInputDateError(undefined);\n    handleDateChanged(formattedDateForTimezone);\n  }, [dateTextFieldValue, handleDateChanged, i18n, onFilterValueChange, userInputDate]);\n  var handleDateFilterOptionsChange = useCallback(function (newOption) {\n    if (!initialConsumerFilterKey.current) {\n      return;\n    }\n\n    if (newOption === DateFilterOption.OnOrBefore) {\n      onFilterKeyChange(filterMaxKey);\n      onFilterValueChange(selectedDate ? stripTimeFromISOString(formatDateForLocalTimezone(selectedDate)) : undefined);\n      return;\n    }\n\n    if (newOption === DateFilterOption.OnOrAfter) {\n      onFilterKeyChange(filterMinKey);\n      onFilterValueChange(selectedDate ? stripTimeFromISOString(formatDateForLocalTimezone(selectedDate)) : undefined);\n      return;\n    }\n\n    onFilterKeyChange(initialConsumerFilterKey.current);\n    onFilterValueChange(newOption);\n  }, [filterMaxKey, filterMinKey, initialConsumerFilterKey, onFilterKeyChange, onFilterValueChange, selectedDate]);\n  var handleDatePickerChange = useCallback(function (_ref3) {\n    var nextDate = _ref3.end;\n    var date = new Date(nextDate);\n    setSelectedDate(date);\n    setUserInputDate(undefined);\n    setUserInputDateError(undefined);\n    handleDateChanged(date);\n  }, [handleDateChanged]);\n  var handleDatePickerMonthChange = useCallback(function (month, year) {\n    setDatePickerMonth(month);\n    setDatePickerYear(year);\n  }, []);\n  var dateFilterOption = getDateFilterOption(filterValue, filterKey, filterMinKey, filterMaxKey);\n  var showDatePredicate = dateFilterOption === DateFilterOption.OnOrBefore || dateFilterOption === DateFilterOption.OnOrAfter;\n  var datePredicateMarkup = showDatePredicate && /*#__PURE__*/React$1.createElement(React$1.Fragment, null, /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.DateTextField\n  }, /*#__PURE__*/React$1.createElement(TextField, {\n    label: i18n.translate('Polaris.ResourceList.DateSelector.dateValueLabel'),\n    placeholder: i18n.translate('Polaris.ResourceList.DateSelector.dateValuePlaceholder'),\n    value: dateTextFieldValue,\n    error: userInputDateError,\n    prefix: _ref,\n    autoComplete: false,\n    onChange: handleDateFieldChange,\n    onBlur: handleDateBlur\n  })), /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.DatePicker\n  }, /*#__PURE__*/React$1.createElement(DatePicker$1, {\n    selected: selectedDate,\n    month: datePickerMonth,\n    year: datePickerYear,\n    onChange: handleDatePickerChange,\n    onMonthChange: handleDatePickerMonthChange\n  })));\n  var dateOptionTypes = {\n    past: [].concat(_toConsumableArray(getDatePastOptions()), _toConsumableArray(getDateComparatorOptions())),\n    future: [].concat(_toConsumableArray(getDateFutureOptions()), _toConsumableArray(getDateComparatorOptions())),\n    full: [].concat(_toConsumableArray(getDatePastOptions()), _toConsumableArray(getDateFutureOptions()), _toConsumableArray(getDateComparatorOptions()))\n  };\n  return /*#__PURE__*/React$1.createElement(React$1.Fragment, null, /*#__PURE__*/React$1.createElement(Select$1, {\n    label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.dateFilterLabel'),\n    labelHidden: true,\n    options: dateOptionType ? dateOptionTypes[dateOptionType] : dateOptionTypes.full,\n    placeholder: i18n.translate('Polaris.ResourceList.FilterValueSelector.selectFilterValuePlaceholder'),\n    value: dateFilterOption,\n    onChange: handleDateFilterOptionsChange\n  }), datePredicateMarkup);\n\n  function getDateComparatorOptions() {\n    return [{\n      value: DateFilterOption.OnOrBefore,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.OnOrBefore')\n    }, {\n      value: DateFilterOption.OnOrAfter,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.OnOrAfter')\n    }];\n  }\n\n  function getDatePastOptions() {\n    return [{\n      value: DateFilterOption.PastWeek,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.PastWeek')\n    }, {\n      value: DateFilterOption.PastMonth,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.PastMonth')\n    }, {\n      value: DateFilterOption.PastQuarter,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.PastQuarter')\n    }, {\n      value: DateFilterOption.PastYear,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.PastYear')\n    }];\n  }\n\n  function getDateFutureOptions() {\n    return [{\n      value: DateFilterOption.ComingWeek,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.ComingWeek')\n    }, {\n      value: DateFilterOption.ComingMonth,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.ComingMonth')\n    }, {\n      value: DateFilterOption.ComingQuarter,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.ComingQuarter')\n    }, {\n      value: DateFilterOption.ComingYear,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.ComingYear')\n    }];\n  }\n\n  function getDateTextFieldValue() {\n    if (!userInputDate && !selectedDate) {\n      return undefined;\n    }\n\n    if (userInputDate !== undefined) {\n      return userInputDate;\n    }\n\n    if (selectedDate) {\n      return stripTimeFromISOString(formatDateForLocalTimezone(selectedDate));\n    }\n  }\n});\n\nfunction isValidDate(date) {\n  if (!date) {\n    return false;\n  }\n\n  return VALID_DATE_REGEX.test(date) && !isNaN(new Date(date).getTime());\n}\n\nfunction getDateFilterOption(filterValue, filterKey, filterMinKey, filterMaxKey) {\n  if (filterKey === filterMaxKey) {\n    return DateFilterOption.OnOrBefore;\n  }\n\n  if (filterKey === filterMinKey) {\n    return DateFilterOption.OnOrAfter;\n  }\n\n  return filterValue;\n}\n\nfunction stripTimeFromISOString(ISOString) {\n  return ISOString.slice(0, 10);\n}\n\nfunction formatDateForLocalTimezone(date) {\n  var timezoneOffset = date.getTimezoneOffset();\n  var timezoneOffsetMs = timezoneOffset * 60 * 1000;\n  var isFringeTimezone = timezoneOffset === -720 || timezoneOffset === 720;\n  var formattedDate = new Date();\n\n  if (isFringeTimezone && date.getHours() !== 0) {\n    return date.toISOString();\n  }\n\n  var newTime = timezoneOffset > -1 ? date.getTime() + timezoneOffsetMs : date.getTime() - timezoneOffsetMs;\n  formattedDate.setTime(newTime);\n  return formattedDate.toISOString();\n}\n\nexport { DateFilterOption, DateSelector };","map":{"version":3,"sources":["/home/hoangdev/Desktop/front.test/node_modules/@shopify/polaris/dist/esm/components/ResourceList/components/FilterControl/components/DateSelector/DateSelector.js"],"names":["React$1","memo","useRef","useState","useCallback","useI18n","CalendarMinor","Icon","Icon$1","TextField","DatePicker","DatePicker$1","Select","Select$1","styles","VALID_DATE_REGEX","DateFilterOption","_ref","createElement","source","color","DateSelector","filterValue","filterKey","filterMinKey","filterMaxKey","dateOptionType","onFilterValueChange","onFilterKeyChange","now","Date","i18n","initialConsumerFilterKey","getMonth","datePickerMonth","setDatePickerMonth","getFullYear","datePickerYear","setDatePickerYear","selectedDate","setSelectedDate","userInputDate","setUserInputDate","userInputDateError","setUserInputDateError","dateTextFieldValue","getDateTextFieldValue","handleDateFieldChange","value","length","undefined","isValidDate","handleDateChanged","date","stripTimeFromISOString","formatDateForLocalTimezone","handleDateBlur","translate","formattedDateForTimezone","handleDateFilterOptionsChange","newOption","current","OnOrBefore","OnOrAfter","handleDatePickerChange","nextDate","end","handleDatePickerMonthChange","month","year","dateFilterOption","getDateFilterOption","showDatePredicate","datePredicateMarkup","Fragment","className","DateTextField","label","placeholder","error","prefix","autoComplete","onChange","onBlur","selected","onMonthChange","dateOptionTypes","past","getDatePastOptions","getDateComparatorOptions","future","getDateFutureOptions","full","labelHidden","options","PastWeek","PastMonth","PastQuarter","PastYear","ComingWeek","ComingMonth","ComingQuarter","ComingYear","test","isNaN","getTime","ISOString","slice","timezoneOffset","getTimezoneOffset","timezoneOffsetMs","isFringeTimezone","formattedDate","getHours","toISOString","newTime","setTime"],"mappings":"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","sourcesContent":["import React$1, { memo, useRef, useState, useCallback } from 'react';\nimport { useI18n } from '../../../../../../utilities/i18n/hooks.js';\nimport { CalendarMinor } from '@shopify/polaris-icons';\nimport { Icon as Icon$1 } from '../../../../../Icon/Icon.js';\nimport { TextField } from '../../../../../TextField/TextField.js';\nimport { DatePicker as DatePicker$1 } from '../../../../../DatePicker/DatePicker.js';\nimport { Select as Select$1 } from '../../../../../Select/Select.js';\nimport styles from './DateSelector.scss.js';\n\nconst VALID_DATE_REGEX = /^\\d{4}-\\d{1,2}-\\d{1,2}$/;\nlet DateFilterOption;\n\n(function (DateFilterOption) {\n  DateFilterOption[\"PastWeek\"] = \"past_week\";\n  DateFilterOption[\"PastMonth\"] = \"past_month\";\n  DateFilterOption[\"PastQuarter\"] = \"past_quarter\";\n  DateFilterOption[\"PastYear\"] = \"past_year\";\n  DateFilterOption[\"ComingWeek\"] = \"coming_week\";\n  DateFilterOption[\"ComingMonth\"] = \"coming_month\";\n  DateFilterOption[\"ComingQuarter\"] = \"coming_quarter\";\n  DateFilterOption[\"ComingYear\"] = \"coming_year\";\n  DateFilterOption[\"OnOrBefore\"] = \"on_or_before\";\n  DateFilterOption[\"OnOrAfter\"] = \"on_or_after\";\n})(DateFilterOption || (DateFilterOption = {}));\n\nvar _ref = /*#__PURE__*/React$1.createElement(Icon$1, {\n  source: CalendarMinor,\n  color: \"subdued\"\n});\n\nconst DateSelector = /*#__PURE__*/memo(function DateSelector({\n  filterValue,\n  filterKey,\n  filterMinKey,\n  filterMaxKey,\n  dateOptionType,\n  onFilterValueChange,\n  onFilterKeyChange\n}) {\n  const now = new Date();\n  const i18n = useI18n();\n  const initialConsumerFilterKey = useRef(filterKey);\n  const [datePickerMonth, setDatePickerMonth] = useState(now.getMonth());\n  const [datePickerYear, setDatePickerYear] = useState(now.getFullYear());\n  const [selectedDate, setSelectedDate] = useState();\n  const [userInputDate, setUserInputDate] = useState();\n  const [userInputDateError, setUserInputDateError] = useState();\n  const dateTextFieldValue = getDateTextFieldValue();\n  const handleDateFieldChange = useCallback(value => {\n    if (value.length === 0) {\n      setSelectedDate(undefined);\n      onFilterValueChange(undefined);\n    }\n\n    if (userInputDateError && isValidDate(value)) {\n      setUserInputDateError(undefined);\n    }\n\n    setUserInputDate(value);\n  }, [onFilterValueChange, userInputDateError]);\n  const handleDateChanged = useCallback(date => {\n    if (!date) {\n      return;\n    }\n\n    onFilterValueChange(stripTimeFromISOString(formatDateForLocalTimezone(date)));\n  }, [onFilterValueChange]);\n  const handleDateBlur = useCallback(() => {\n    if (!dateTextFieldValue || !isValidDate(dateTextFieldValue)) {\n      setSelectedDate(undefined);\n      setUserInputDateError(i18n.translate('Polaris.ResourceList.DateSelector.dateValueError'));\n      onFilterValueChange(undefined);\n      return;\n    }\n\n    if (!userInputDate) {\n      return;\n    }\n\n    const formattedDateForTimezone = new Date(formatDateForLocalTimezone(new Date(userInputDate)));\n    setSelectedDate(formattedDateForTimezone);\n    setDatePickerMonth(formattedDateForTimezone.getMonth());\n    setDatePickerYear(formattedDateForTimezone.getFullYear());\n    setUserInputDate(undefined);\n    setUserInputDateError(undefined);\n    handleDateChanged(formattedDateForTimezone);\n  }, [dateTextFieldValue, handleDateChanged, i18n, onFilterValueChange, userInputDate]);\n  const handleDateFilterOptionsChange = useCallback(newOption => {\n    if (!initialConsumerFilterKey.current) {\n      return;\n    }\n\n    if (newOption === DateFilterOption.OnOrBefore) {\n      onFilterKeyChange(filterMaxKey);\n      onFilterValueChange(selectedDate ? stripTimeFromISOString(formatDateForLocalTimezone(selectedDate)) : undefined);\n      return;\n    }\n\n    if (newOption === DateFilterOption.OnOrAfter) {\n      onFilterKeyChange(filterMinKey);\n      onFilterValueChange(selectedDate ? stripTimeFromISOString(formatDateForLocalTimezone(selectedDate)) : undefined);\n      return;\n    }\n\n    onFilterKeyChange(initialConsumerFilterKey.current);\n    onFilterValueChange(newOption);\n  }, [filterMaxKey, filterMinKey, initialConsumerFilterKey, onFilterKeyChange, onFilterValueChange, selectedDate]);\n  const handleDatePickerChange = useCallback(({\n    end: nextDate\n  }) => {\n    const date = new Date(nextDate);\n    setSelectedDate(date);\n    setUserInputDate(undefined);\n    setUserInputDateError(undefined);\n    handleDateChanged(date);\n  }, [handleDateChanged]);\n  const handleDatePickerMonthChange = useCallback((month, year) => {\n    setDatePickerMonth(month);\n    setDatePickerYear(year);\n  }, []);\n  const dateFilterOption = getDateFilterOption(filterValue, filterKey, filterMinKey, filterMaxKey);\n  const showDatePredicate = dateFilterOption === DateFilterOption.OnOrBefore || dateFilterOption === DateFilterOption.OnOrAfter;\n  const datePredicateMarkup = showDatePredicate && /*#__PURE__*/React$1.createElement(React$1.Fragment, null, /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.DateTextField\n  }, /*#__PURE__*/React$1.createElement(TextField, {\n    label: i18n.translate('Polaris.ResourceList.DateSelector.dateValueLabel'),\n    placeholder: i18n.translate('Polaris.ResourceList.DateSelector.dateValuePlaceholder'),\n    value: dateTextFieldValue,\n    error: userInputDateError,\n    prefix: _ref,\n    autoComplete: false,\n    onChange: handleDateFieldChange,\n    onBlur: handleDateBlur\n  })), /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.DatePicker\n  }, /*#__PURE__*/React$1.createElement(DatePicker$1, {\n    selected: selectedDate,\n    month: datePickerMonth,\n    year: datePickerYear,\n    onChange: handleDatePickerChange,\n    onMonthChange: handleDatePickerMonthChange\n  })));\n  const dateOptionTypes = {\n    past: [...getDatePastOptions(), ...getDateComparatorOptions()],\n    future: [...getDateFutureOptions(), ...getDateComparatorOptions()],\n    full: [...getDatePastOptions(), ...getDateFutureOptions(), ...getDateComparatorOptions()]\n  };\n  return /*#__PURE__*/React$1.createElement(React$1.Fragment, null, /*#__PURE__*/React$1.createElement(Select$1, {\n    label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.dateFilterLabel'),\n    labelHidden: true,\n    options: dateOptionType ? dateOptionTypes[dateOptionType] : dateOptionTypes.full,\n    placeholder: i18n.translate('Polaris.ResourceList.FilterValueSelector.selectFilterValuePlaceholder'),\n    value: dateFilterOption,\n    onChange: handleDateFilterOptionsChange\n  }), datePredicateMarkup);\n\n  function getDateComparatorOptions() {\n    return [{\n      value: DateFilterOption.OnOrBefore,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.OnOrBefore')\n    }, {\n      value: DateFilterOption.OnOrAfter,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.OnOrAfter')\n    }];\n  }\n\n  function getDatePastOptions() {\n    return [{\n      value: DateFilterOption.PastWeek,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.PastWeek')\n    }, {\n      value: DateFilterOption.PastMonth,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.PastMonth')\n    }, {\n      value: DateFilterOption.PastQuarter,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.PastQuarter')\n    }, {\n      value: DateFilterOption.PastYear,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.PastYear')\n    }];\n  }\n\n  function getDateFutureOptions() {\n    return [{\n      value: DateFilterOption.ComingWeek,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.ComingWeek')\n    }, {\n      value: DateFilterOption.ComingMonth,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.ComingMonth')\n    }, {\n      value: DateFilterOption.ComingQuarter,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.ComingQuarter')\n    }, {\n      value: DateFilterOption.ComingYear,\n      label: i18n.translate('Polaris.ResourceList.DateSelector.SelectOptions.ComingYear')\n    }];\n  }\n\n  function getDateTextFieldValue() {\n    if (!userInputDate && !selectedDate) {\n      return undefined;\n    }\n\n    if (userInputDate !== undefined) {\n      return userInputDate;\n    }\n\n    if (selectedDate) {\n      return stripTimeFromISOString(formatDateForLocalTimezone(selectedDate));\n    }\n  }\n});\n\nfunction isValidDate(date) {\n  if (!date) {\n    return false;\n  }\n\n  return VALID_DATE_REGEX.test(date) && !isNaN(new Date(date).getTime());\n}\n\nfunction getDateFilterOption(filterValue, filterKey, filterMinKey, filterMaxKey) {\n  if (filterKey === filterMaxKey) {\n    return DateFilterOption.OnOrBefore;\n  }\n\n  if (filterKey === filterMinKey) {\n    return DateFilterOption.OnOrAfter;\n  }\n\n  return filterValue;\n}\n\nfunction stripTimeFromISOString(ISOString) {\n  return ISOString.slice(0, 10);\n}\n\nfunction formatDateForLocalTimezone(date) {\n  const timezoneOffset = date.getTimezoneOffset();\n  const timezoneOffsetMs = timezoneOffset * 60 * 1000;\n  const isFringeTimezone = timezoneOffset === -720 || timezoneOffset === 720;\n  const formattedDate = new Date();\n\n  if (isFringeTimezone && date.getHours() !== 0) {\n    return date.toISOString();\n  }\n\n  const newTime = timezoneOffset > -1 ? date.getTime() + timezoneOffsetMs : date.getTime() - timezoneOffsetMs;\n  formattedDate.setTime(newTime);\n  return formattedDate.toISOString();\n}\n\nexport { DateFilterOption, DateSelector };\n"]},"metadata":{},"sourceType":"module"}