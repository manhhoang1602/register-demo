{"ast":null,"code":"import _defineProperty from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { Key } from '../../../../types.js';\nimport React$1, { Component, createRef } from 'react';\nimport debounce$1 from 'lodash/debounce';\nimport { EventListener as EventListener$1 } from '../../../EventListener/EventListener.js';\nimport { FeaturesContext } from '../../../../utilities/features/context.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport isEqual$1 from 'lodash/isEqual';\nimport { labelID } from '../../../Label/Label.js';\nimport { Labelled as Labelled$1 } from '../../../Labelled/Labelled.js';\nimport { CSS_VAR_PREFIX } from '../../utilities/index.js';\nimport styles from './DualThumb.scss.js';\nvar Control;\n\n(function (Control) {\n  Control[Control[\"Lower\"] = 0] = \"Lower\";\n  Control[Control[\"Upper\"] = 1] = \"Upper\";\n})(Control || (Control = {}));\n\nvar DualThumb = /*#__PURE__*/function (_Component) {\n  _inherits(DualThumb, _Component);\n\n  var _super = _createSuper(DualThumb);\n\n  function DualThumb() {\n    var _this;\n\n    _classCallCheck(this, DualThumb);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.context = void 0;\n    _this.state = {\n      value: sanitizeValue(_this.props.value, _this.props.min, _this.props.max, _this.props.step),\n      trackWidth: 0,\n      trackLeft: 0\n    };\n    _this.track = /*#__PURE__*/createRef();\n    _this.trackWrapper = /*#__PURE__*/createRef();\n    _this.thumbLower = /*#__PURE__*/createRef();\n    _this.thumbUpper = /*#__PURE__*/createRef();\n    _this.setTrackPosition = debounce$1(function () {\n      if (_this.track.current) {\n        var thumbSize = 16;\n\n        var _this$track$current$g = _this.track.current.getBoundingClientRect(),\n            width = _this$track$current$g.width,\n            left = _this$track$current$g.left;\n\n        var adjustedTrackWidth = width - thumbSize;\n        var adjustedTrackLeft = left + thumbSize / 2;\n\n        _this.setState({\n          trackWidth: adjustedTrackWidth,\n          trackLeft: adjustedTrackLeft\n        });\n      }\n    }, 40, {\n      leading: true,\n      trailing: true,\n      maxWait: 40\n    });\n\n    _this.handleMouseDownThumbLower = function (event) {\n      if (event.button !== 0 || _this.props.disabled) return;\n      registerMouseMoveHandler(_this.handleMouseMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    _this.handleMouseMoveThumbLower = function (event) {\n      var valueUpper = _this.state.value[1];\n\n      _this.setValue([_this.actualXPosition(event.clientX), valueUpper], Control.Upper);\n    };\n\n    _this.handleTouchStartThumbLower = function (event) {\n      if (_this.props.disabled) return;\n      registerTouchMoveHandler(_this.handleTouchMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    _this.handleTouchMoveThumbLower = function (event) {\n      event.preventDefault();\n      var valueUpper = _this.state.value[1];\n\n      _this.setValue([_this.actualXPosition(event.touches[0].clientX), valueUpper], Control.Upper);\n    };\n\n    _this.handleMouseDownThumbUpper = function (event) {\n      if (event.button !== 0 || _this.props.disabled) return;\n      registerMouseMoveHandler(_this.handleMouseMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    _this.handleMouseMoveThumbUpper = function (event) {\n      var valueLower = _this.state.value[0];\n\n      _this.setValue([valueLower, _this.actualXPosition(event.clientX)], Control.Lower);\n    };\n\n    _this.handleTouchStartThumbUpper = function (event) {\n      if (_this.props.disabled) return;\n      registerTouchMoveHandler(_this.handleTouchMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    _this.handleTouchMoveThumbUpper = function (event) {\n      event.preventDefault();\n      var valueLower = _this.state.value[0];\n\n      _this.setValue([valueLower, _this.actualXPosition(event.touches[0].clientX)], Control.Lower);\n    };\n\n    _this.handleKeypressLower = function (event) {\n      var _handlerMap;\n\n      if (_this.props.disabled) return;\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          incrementValueLower = _assertThisInitialize.incrementValueLower,\n          decrementValueLower = _assertThisInitialize.decrementValueLower;\n\n      var handlerMap = (_handlerMap = {}, _defineProperty(_handlerMap, Key.UpArrow, incrementValueLower), _defineProperty(_handlerMap, Key.RightArrow, incrementValueLower), _defineProperty(_handlerMap, Key.DownArrow, decrementValueLower), _defineProperty(_handlerMap, Key.LeftArrow, decrementValueLower), _handlerMap);\n      var handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    _this.handleKeypressUpper = function (event) {\n      var _handlerMap2;\n\n      if (_this.props.disabled) return;\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          incrementValueUpper = _assertThisInitialize2.incrementValueUpper,\n          decrementValueUpper = _assertThisInitialize2.decrementValueUpper;\n\n      var handlerMap = (_handlerMap2 = {}, _defineProperty(_handlerMap2, Key.UpArrow, incrementValueUpper), _defineProperty(_handlerMap2, Key.RightArrow, incrementValueUpper), _defineProperty(_handlerMap2, Key.DownArrow, decrementValueUpper), _defineProperty(_handlerMap2, Key.LeftArrow, decrementValueUpper), _handlerMap2);\n      var handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    _this.incrementValueLower = function () {\n      _this.setValue([_this.state.value[0] + _this.props.step, _this.state.value[1]], Control.Upper);\n    };\n\n    _this.decrementValueLower = function () {\n      _this.setValue([_this.state.value[0] - _this.props.step, _this.state.value[1]], Control.Upper);\n    };\n\n    _this.incrementValueUpper = function () {\n      _this.setValue([_this.state.value[0], _this.state.value[1] + _this.props.step], Control.Lower);\n    };\n\n    _this.decrementValueUpper = function () {\n      _this.setValue([_this.state.value[0], _this.state.value[1] - _this.props.step], Control.Lower);\n    };\n\n    _this.dispatchValue = function () {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          id = _this$props.id;\n      var value = _this.state.value;\n      onChange(value, id);\n    };\n\n    _this.setValue = function (dirtyValue, control) {\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          _assertThisInitialize4 = _assertThisInitialize3.props,\n          min = _assertThisInitialize4.min,\n          max = _assertThisInitialize4.max,\n          step = _assertThisInitialize4.step,\n          value = _assertThisInitialize3.state.value;\n\n      var sanitizedValue = sanitizeValue(dirtyValue, min, max, step, control);\n\n      if (isEqual$1(sanitizedValue, value) === false) {\n        _this.setState({\n          value: sanitizedValue\n        }, _this.dispatchValue);\n      }\n    };\n\n    _this.handleMouseDownTrack = function (event) {\n      if (event.button !== 0 || _this.props.disabled) return;\n      event.preventDefault();\n\n      var clickXPosition = _this.actualXPosition(event.clientX);\n\n      var value = _this.state.value;\n      var distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      var distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        _this.setValue([clickXPosition, value[1]], Control.Upper);\n\n        registerMouseMoveHandler(_this.handleMouseMoveThumbLower);\n\n        if (_this.thumbLower.current != null) {\n          _this.thumbLower.current.focus();\n        }\n      } else {\n        _this.setValue([value[0], clickXPosition], Control.Lower);\n\n        registerMouseMoveHandler(_this.handleMouseMoveThumbUpper);\n\n        if (_this.thumbUpper.current != null) {\n          _this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    _this.handleTouchStartTrack = function (event) {\n      if (_this.props.disabled) return;\n      event.preventDefault();\n\n      var clickXPosition = _this.actualXPosition(event.touches[0].clientX);\n\n      var value = _this.state.value;\n      var distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      var distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        _this.setValue([clickXPosition, value[1]], Control.Upper);\n\n        registerTouchMoveHandler(_this.handleTouchMoveThumbLower);\n\n        if (_this.thumbLower.current != null) {\n          _this.thumbLower.current.focus();\n        }\n      } else {\n        _this.setValue([value[0], clickXPosition], Control.Lower);\n\n        registerTouchMoveHandler(_this.handleTouchMoveThumbUpper);\n\n        if (_this.thumbUpper.current != null) {\n          _this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    _this.actualXPosition = function (dirtyXPosition) {\n      if (_this.track.current) {\n        var _this$props2 = _this.props,\n            min = _this$props2.min,\n            max = _this$props2.max;\n        var _this$state = _this.state,\n            trackLeft = _this$state.trackLeft,\n            trackWidth = _this$state.trackWidth;\n        var relativeX = dirtyXPosition - trackLeft;\n        var percentageOfTrack = relativeX / trackWidth;\n        return percentageOfTrack * (max - min);\n      } else {\n        return 0;\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(DualThumb, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setTrackPosition();\n\n      if (this.trackWrapper.current != null) {\n        this.trackWrapper.current.addEventListener('touchstart', this.handleTouchStartTrack, {\n          passive: false\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.trackWrapper.current != null) {\n        this.trackWrapper.current.removeEventListener('touchstart', this.handleTouchStartTrack);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _cssVars;\n\n      var _this$props3 = this.props,\n          id = _this$props3.id,\n          min = _this$props3.min,\n          max = _this$props3.max,\n          prefix = _this$props3.prefix,\n          suffix = _this$props3.suffix,\n          disabled = _this$props3.disabled,\n          output = _this$props3.output,\n          error = _this$props3.error,\n          onFocus = _this$props3.onFocus,\n          onBlur = _this$props3.onBlur,\n          label = _this$props3.label,\n          labelAction = _this$props3.labelAction,\n          labelHidden = _this$props3.labelHidden,\n          helpText = _this$props3.helpText;\n      var value = this.state.value;\n      var idLower = id;\n      var idUpper = \"\".concat(id, \"Upper\");\n      var describedBy = [];\n\n      if (error) {\n        describedBy.push(\"\".concat(id, \"Error\"));\n      }\n\n      var ariaDescribedBy = describedBy.length ? describedBy.join(' ') : undefined;\n      var trackWrapperClassName = classNames(styles.TrackWrapper, error && styles.error, disabled && styles.disabled);\n      var thumbLowerClassName = classNames(styles.Thumbs, styles.ThumbLower, disabled && styles.disabled);\n      var thumbUpperClassName = classNames(styles.Thumbs, styles.ThumbUpper, disabled && styles.disabled);\n      var trackWidth = this.state.trackWidth;\n      var range = max - min;\n      var leftPositionThumbLower = value[0] / range * trackWidth;\n      var leftPositionThumbUpper = value[1] / range * trackWidth;\n      var outputLowerClassName = classNames(styles.Output, styles.OutputLower);\n      var outputMarkupLower = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n        htmlFor: idLower,\n        className: outputLowerClassName,\n        style: {\n          left: \"\".concat(leftPositionThumbLower, \"px\")\n        }\n      }, /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.OutputBubble\n      }, /*#__PURE__*/React$1.createElement(\"span\", {\n        className: styles.OutputText\n      }, value[0]))) : null;\n      var outputUpperClassName = classNames(styles.Output, styles.OutputUpper);\n      var outputMarkupUpper = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n        htmlFor: idUpper,\n        className: outputUpperClassName,\n        style: {\n          left: \"\".concat(leftPositionThumbUpper, \"px\")\n        }\n      }, /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.OutputBubble\n      }, /*#__PURE__*/React$1.createElement(\"span\", {\n        className: styles.OutputText\n      }, value[1]))) : null;\n      var cssVars = (_cssVars = {}, _defineProperty(_cssVars, \"\".concat(CSS_VAR_PREFIX, \"progress-lower\"), \"\".concat(leftPositionThumbLower, \"px\")), _defineProperty(_cssVars, \"\".concat(CSS_VAR_PREFIX, \"progress-upper\"), \"\".concat(leftPositionThumbUpper, \"px\")), _cssVars);\n      var prefixMarkup = prefix && /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.Prefix\n      }, prefix);\n      var suffixMarkup = suffix && /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.Suffix\n      }, suffix);\n      return /*#__PURE__*/React$1.createElement(React$1.Fragment, null, /*#__PURE__*/React$1.createElement(Labelled$1, {\n        id: id,\n        label: label,\n        error: error,\n        action: labelAction,\n        labelHidden: labelHidden,\n        helpText: helpText\n      }, /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.Wrapper\n      }, prefixMarkup, /*#__PURE__*/React$1.createElement(\"div\", {\n        className: trackWrapperClassName,\n        onMouseDown: this.handleMouseDownTrack,\n        ref: this.trackWrapper\n      }, /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles.Track,\n        style: cssVars,\n        ref: this.track\n      }), /*#__PURE__*/React$1.createElement(\"div\", {\n        className: styles['Track--dashed']\n      }), /*#__PURE__*/React$1.createElement(\"div\", {\n        id: idLower,\n        className: thumbLowerClassName,\n        style: {\n          left: \"\".concat(leftPositionThumbLower, \"px\")\n        },\n        role: \"slider\",\n        \"aria-disabled\": disabled,\n        \"aria-valuemin\": min,\n        \"aria-valuemax\": max,\n        \"aria-valuenow\": value[0],\n        \"aria-invalid\": Boolean(error),\n        \"aria-describedby\": ariaDescribedBy,\n        \"aria-labelledby\": labelID(id),\n        onFocus: onFocus,\n        onBlur: onBlur,\n        tabIndex: 0,\n        onKeyDown: this.handleKeypressLower,\n        onMouseDown: this.handleMouseDownThumbLower,\n        onTouchStart: this.handleTouchStartThumbLower,\n        ref: this.thumbLower\n      }), outputMarkupLower, /*#__PURE__*/React$1.createElement(\"div\", {\n        id: idUpper,\n        className: thumbUpperClassName,\n        style: {\n          left: \"\".concat(leftPositionThumbUpper, \"px\")\n        },\n        role: \"slider\",\n        \"aria-disabled\": disabled,\n        \"aria-valuemin\": min,\n        \"aria-valuemax\": max,\n        \"aria-valuenow\": value[1],\n        \"aria-invalid\": Boolean(error),\n        \"aria-describedby\": ariaDescribedBy,\n        \"aria-labelledby\": labelID(id),\n        onFocus: onFocus,\n        onBlur: onBlur,\n        tabIndex: 0,\n        onKeyDown: this.handleKeypressUpper,\n        onMouseDown: this.handleMouseDownThumbUpper,\n        onTouchStart: this.handleTouchStartThumbUpper,\n        ref: this.thumbUpper\n      }), outputMarkupUpper), suffixMarkup)), /*#__PURE__*/React$1.createElement(EventListener$1, {\n        event: \"resize\",\n        handler: this.setTrackPosition\n      }));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var min = props.min,\n          step = props.step,\n          max = props.max,\n          value = props.value,\n          onChange = props.onChange,\n          id = props.id;\n      var prevValue = state.prevValue;\n\n      if (isEqual$1(prevValue, value)) {\n        return null;\n      }\n\n      var sanitizedValue = sanitizeValue(value, min, max, step);\n\n      if (!isEqual$1(value, sanitizedValue)) {\n        onChange(sanitizedValue, id);\n      }\n\n      return {\n        prevValue: value,\n        value: sanitizedValue\n      };\n    }\n  }]);\n\n  return DualThumb;\n}(Component);\n\nDualThumb.contextType = FeaturesContext;\n\nfunction registerMouseMoveHandler(handler) {\n  document.addEventListener('mousemove', handler);\n  document.addEventListener('mouseup', function () {\n    document.removeEventListener('mousemove', handler);\n  }, {\n    once: true\n  });\n}\n\nfunction registerTouchMoveHandler(handler) {\n  var removeHandler = function removeHandler() {\n    document.removeEventListener('touchmove', handler);\n    document.removeEventListener('touchend', removeHandler);\n    document.removeEventListener('touchcancel', removeHandler);\n  };\n\n  document.addEventListener('touchmove', handler, {\n    passive: false\n  });\n  document.addEventListener('touchend', removeHandler, {\n    once: true\n  });\n  document.addEventListener('touchcancel', removeHandler, {\n    once: true\n  });\n}\n\nfunction sanitizeValue(value, min, max, step) {\n  var control = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : Control.Upper;\n  var upperValue = inBoundsUpper(roundedToStep(value[1]));\n  var lowerValue = inBoundsLower(roundedToStep(value[0]));\n  var maxLowerValue = upperValue - step;\n  var minUpperValue = lowerValue + step;\n\n  if (control === Control.Upper && lowerValue > maxLowerValue) {\n    lowerValue = maxLowerValue;\n  } else if (control === Control.Lower && upperValue < minUpperValue) {\n    upperValue = minUpperValue;\n  }\n\n  return [lowerValue, upperValue];\n\n  function inBoundsUpper(value) {\n    var lowerMin = min + step;\n\n    if (value < lowerMin) {\n      return lowerMin;\n    } else if (value > max) {\n      return max;\n    } else {\n      return value;\n    }\n  }\n\n  function inBoundsLower(value) {\n    var upperMax = max - step;\n\n    if (value < min) {\n      return min;\n    } else if (value > upperMax) {\n      return upperMax;\n    } else {\n      return value;\n    }\n  }\n\n  function roundedToStep(value) {\n    return Math.round(value / step) * step;\n  }\n}\n\nexport { DualThumb };","map":{"version":3,"sources":["/home/hoangdev/Desktop/front.test/node_modules/@shopify/polaris/dist/esm/components/RangeSlider/components/DualThumb/DualThumb.js"],"names":["Key","React$1","Component","createRef","debounce$1","EventListener","EventListener$1","FeaturesContext","classNames","isEqual$1","labelID","Labelled","Labelled$1","CSS_VAR_PREFIX","styles","Control","DualThumb","args","context","state","value","sanitizeValue","props","min","max","step","trackWidth","trackLeft","track","trackWrapper","thumbLower","thumbUpper","setTrackPosition","current","thumbSize","getBoundingClientRect","width","left","adjustedTrackWidth","adjustedTrackLeft","setState","leading","trailing","maxWait","handleMouseDownThumbLower","event","button","disabled","registerMouseMoveHandler","handleMouseMoveThumbLower","stopPropagation","valueUpper","setValue","actualXPosition","clientX","Upper","handleTouchStartThumbLower","registerTouchMoveHandler","handleTouchMoveThumbLower","preventDefault","touches","handleMouseDownThumbUpper","handleMouseMoveThumbUpper","valueLower","Lower","handleTouchStartThumbUpper","handleTouchMoveThumbUpper","handleKeypressLower","incrementValueLower","decrementValueLower","handlerMap","UpArrow","RightArrow","DownArrow","LeftArrow","handler","keyCode","handleKeypressUpper","incrementValueUpper","decrementValueUpper","dispatchValue","onChange","id","dirtyValue","control","sanitizedValue","handleMouseDownTrack","clickXPosition","distanceFromLowerThumb","Math","abs","distanceFromUpperThumb","focus","handleTouchStartTrack","dirtyXPosition","relativeX","percentageOfTrack","addEventListener","passive","removeEventListener","prefix","suffix","output","error","onFocus","onBlur","label","labelAction","labelHidden","helpText","idLower","idUpper","describedBy","push","ariaDescribedBy","length","join","undefined","trackWrapperClassName","TrackWrapper","thumbLowerClassName","Thumbs","ThumbLower","thumbUpperClassName","ThumbUpper","range","leftPositionThumbLower","leftPositionThumbUpper","outputLowerClassName","Output","OutputLower","outputMarkupLower","createElement","htmlFor","className","style","OutputBubble","OutputText","outputUpperClassName","OutputUpper","outputMarkupUpper","cssVars","prefixMarkup","Prefix","suffixMarkup","Suffix","Fragment","action","Wrapper","onMouseDown","ref","Track","role","Boolean","tabIndex","onKeyDown","onTouchStart","prevValue","contextType","document","once","removeHandler","upperValue","inBoundsUpper","roundedToStep","lowerValue","inBoundsLower","maxLowerValue","minUpperValue","lowerMin","upperMax","round"],"mappings":"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","sourcesContent":["import { Key } from '../../../../types.js';\nimport React$1, { Component, createRef } from 'react';\nimport debounce$1 from 'lodash/debounce';\nimport { EventListener as EventListener$1 } from '../../../EventListener/EventListener.js';\nimport { FeaturesContext } from '../../../../utilities/features/context.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport isEqual$1 from 'lodash/isEqual';\nimport { labelID } from '../../../Label/Label.js';\nimport { Labelled as Labelled$1 } from '../../../Labelled/Labelled.js';\nimport { CSS_VAR_PREFIX } from '../../utilities/index.js';\nimport styles from './DualThumb.scss.js';\n\nvar Control;\n\n(function (Control) {\n  Control[Control[\"Lower\"] = 0] = \"Lower\";\n  Control[Control[\"Upper\"] = 1] = \"Upper\";\n})(Control || (Control = {}));\n\nclass DualThumb extends Component {\n  constructor(...args) {\n    super(...args);\n    this.context = void 0;\n    this.state = {\n      value: sanitizeValue(this.props.value, this.props.min, this.props.max, this.props.step),\n      trackWidth: 0,\n      trackLeft: 0\n    };\n    this.track = /*#__PURE__*/createRef();\n    this.trackWrapper = /*#__PURE__*/createRef();\n    this.thumbLower = /*#__PURE__*/createRef();\n    this.thumbUpper = /*#__PURE__*/createRef();\n    this.setTrackPosition = debounce$1(() => {\n      if (this.track.current) {\n        const thumbSize = 16;\n        const {\n          width,\n          left\n        } = this.track.current.getBoundingClientRect();\n        const adjustedTrackWidth = width - thumbSize;\n        const adjustedTrackLeft = left + thumbSize / 2;\n        this.setState({\n          trackWidth: adjustedTrackWidth,\n          trackLeft: adjustedTrackLeft\n        });\n      }\n    }, 40, {\n      leading: true,\n      trailing: true,\n      maxWait: 40\n    });\n\n    this.handleMouseDownThumbLower = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbLower = event => {\n      const valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleTouchStartThumbLower = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbLower = event => {\n      event.preventDefault();\n      const valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.touches[0].clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleMouseDownThumbUpper = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbUpper = event => {\n      const valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.clientX)], Control.Lower);\n    };\n\n    this.handleTouchStartThumbUpper = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbUpper = event => {\n      event.preventDefault();\n      const valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.touches[0].clientX)], Control.Lower);\n    };\n\n    this.handleKeypressLower = event => {\n      if (this.props.disabled) return;\n      const {\n        incrementValueLower,\n        decrementValueLower\n      } = this;\n      const handlerMap = {\n        [Key.UpArrow]: incrementValueLower,\n        [Key.RightArrow]: incrementValueLower,\n        [Key.DownArrow]: decrementValueLower,\n        [Key.LeftArrow]: decrementValueLower\n      };\n      const handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.handleKeypressUpper = event => {\n      if (this.props.disabled) return;\n      const {\n        incrementValueUpper,\n        decrementValueUpper\n      } = this;\n      const handlerMap = {\n        [Key.UpArrow]: incrementValueUpper,\n        [Key.RightArrow]: incrementValueUpper,\n        [Key.DownArrow]: decrementValueUpper,\n        [Key.LeftArrow]: decrementValueUpper\n      };\n      const handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.incrementValueLower = () => {\n      this.setValue([this.state.value[0] + this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.decrementValueLower = () => {\n      this.setValue([this.state.value[0] - this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.incrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] + this.props.step], Control.Lower);\n    };\n\n    this.decrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] - this.props.step], Control.Lower);\n    };\n\n    this.dispatchValue = () => {\n      const {\n        onChange,\n        id\n      } = this.props;\n      const {\n        value\n      } = this.state;\n      onChange(value, id);\n    };\n\n    this.setValue = (dirtyValue, control) => {\n      const {\n        props: {\n          min,\n          max,\n          step\n        },\n        state: {\n          value\n        }\n      } = this;\n      const sanitizedValue = sanitizeValue(dirtyValue, min, max, step, control);\n\n      if (isEqual$1(sanitizedValue, value) === false) {\n        this.setState({\n          value: sanitizedValue\n        }, this.dispatchValue);\n      }\n    };\n\n    this.handleMouseDownTrack = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      event.preventDefault();\n      const clickXPosition = this.actualXPosition(event.clientX);\n      const {\n        value\n      } = this.state;\n      const distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      const distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.handleTouchStartTrack = event => {\n      if (this.props.disabled) return;\n      event.preventDefault();\n      const clickXPosition = this.actualXPosition(event.touches[0].clientX);\n      const {\n        value\n      } = this.state;\n      const distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      const distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.actualXPosition = dirtyXPosition => {\n      if (this.track.current) {\n        const {\n          min,\n          max\n        } = this.props;\n        const {\n          trackLeft,\n          trackWidth\n        } = this.state;\n        const relativeX = dirtyXPosition - trackLeft;\n        const percentageOfTrack = relativeX / trackWidth;\n        return percentageOfTrack * (max - min);\n      } else {\n        return 0;\n      }\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const {\n      min,\n      step,\n      max,\n      value,\n      onChange,\n      id\n    } = props;\n    const {\n      prevValue\n    } = state;\n\n    if (isEqual$1(prevValue, value)) {\n      return null;\n    }\n\n    const sanitizedValue = sanitizeValue(value, min, max, step);\n\n    if (!isEqual$1(value, sanitizedValue)) {\n      onChange(sanitizedValue, id);\n    }\n\n    return {\n      prevValue: value,\n      value: sanitizedValue\n    };\n  }\n\n  componentDidMount() {\n    this.setTrackPosition();\n\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.addEventListener('touchstart', this.handleTouchStartTrack, {\n        passive: false\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.removeEventListener('touchstart', this.handleTouchStartTrack);\n    }\n  }\n\n  render() {\n    const {\n      id,\n      min,\n      max,\n      prefix,\n      suffix,\n      disabled,\n      output,\n      error,\n      onFocus,\n      onBlur,\n      label,\n      labelAction,\n      labelHidden,\n      helpText\n    } = this.props;\n    const {\n      value\n    } = this.state;\n    const idLower = id;\n    const idUpper = `${id}Upper`;\n    const describedBy = [];\n\n    if (error) {\n      describedBy.push(`${id}Error`);\n    }\n\n    const ariaDescribedBy = describedBy.length ? describedBy.join(' ') : undefined;\n    const trackWrapperClassName = classNames(styles.TrackWrapper, error && styles.error, disabled && styles.disabled);\n    const thumbLowerClassName = classNames(styles.Thumbs, styles.ThumbLower, disabled && styles.disabled);\n    const thumbUpperClassName = classNames(styles.Thumbs, styles.ThumbUpper, disabled && styles.disabled);\n    const trackWidth = this.state.trackWidth;\n    const range = max - min;\n    const leftPositionThumbLower = value[0] / range * trackWidth;\n    const leftPositionThumbUpper = value[1] / range * trackWidth;\n    const outputLowerClassName = classNames(styles.Output, styles.OutputLower);\n    const outputMarkupLower = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n      htmlFor: idLower,\n      className: outputLowerClassName,\n      style: {\n        left: `${leftPositionThumbLower}px`\n      }\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React$1.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[0]))) : null;\n    const outputUpperClassName = classNames(styles.Output, styles.OutputUpper);\n    const outputMarkupUpper = !disabled && output ? /*#__PURE__*/React$1.createElement(\"output\", {\n      htmlFor: idUpper,\n      className: outputUpperClassName,\n      style: {\n        left: `${leftPositionThumbUpper}px`\n      }\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React$1.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[1]))) : null;\n    const cssVars = {\n      [`${CSS_VAR_PREFIX}progress-lower`]: `${leftPositionThumbLower}px`,\n      [`${CSS_VAR_PREFIX}progress-upper`]: `${leftPositionThumbUpper}px`\n    };\n    const prefixMarkup = prefix && /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Prefix\n    }, prefix);\n    const suffixMarkup = suffix && /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Suffix\n    }, suffix);\n    return /*#__PURE__*/React$1.createElement(React$1.Fragment, null, /*#__PURE__*/React$1.createElement(Labelled$1, {\n      id: id,\n      label: label,\n      error: error,\n      action: labelAction,\n      labelHidden: labelHidden,\n      helpText: helpText\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Wrapper\n    }, prefixMarkup, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: trackWrapperClassName,\n      onMouseDown: this.handleMouseDownTrack,\n      ref: this.trackWrapper\n    }, /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Track,\n      style: cssVars,\n      ref: this.track\n    }), /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles['Track--dashed']\n    }), /*#__PURE__*/React$1.createElement(\"div\", {\n      id: idLower,\n      className: thumbLowerClassName,\n      style: {\n        left: `${leftPositionThumbLower}px`\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[0],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      tabIndex: 0,\n      onKeyDown: this.handleKeypressLower,\n      onMouseDown: this.handleMouseDownThumbLower,\n      onTouchStart: this.handleTouchStartThumbLower,\n      ref: this.thumbLower\n    }), outputMarkupLower, /*#__PURE__*/React$1.createElement(\"div\", {\n      id: idUpper,\n      className: thumbUpperClassName,\n      style: {\n        left: `${leftPositionThumbUpper}px`\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[1],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      tabIndex: 0,\n      onKeyDown: this.handleKeypressUpper,\n      onMouseDown: this.handleMouseDownThumbUpper,\n      onTouchStart: this.handleTouchStartThumbUpper,\n      ref: this.thumbUpper\n    }), outputMarkupUpper), suffixMarkup)), /*#__PURE__*/React$1.createElement(EventListener$1, {\n      event: \"resize\",\n      handler: this.setTrackPosition\n    }));\n  }\n\n}\nDualThumb.contextType = FeaturesContext;\n\nfunction registerMouseMoveHandler(handler) {\n  document.addEventListener('mousemove', handler);\n  document.addEventListener('mouseup', () => {\n    document.removeEventListener('mousemove', handler);\n  }, {\n    once: true\n  });\n}\n\nfunction registerTouchMoveHandler(handler) {\n  const removeHandler = () => {\n    document.removeEventListener('touchmove', handler);\n    document.removeEventListener('touchend', removeHandler);\n    document.removeEventListener('touchcancel', removeHandler);\n  };\n\n  document.addEventListener('touchmove', handler, {\n    passive: false\n  });\n  document.addEventListener('touchend', removeHandler, {\n    once: true\n  });\n  document.addEventListener('touchcancel', removeHandler, {\n    once: true\n  });\n}\n\nfunction sanitizeValue(value, min, max, step, control = Control.Upper) {\n  let upperValue = inBoundsUpper(roundedToStep(value[1]));\n  let lowerValue = inBoundsLower(roundedToStep(value[0]));\n  const maxLowerValue = upperValue - step;\n  const minUpperValue = lowerValue + step;\n\n  if (control === Control.Upper && lowerValue > maxLowerValue) {\n    lowerValue = maxLowerValue;\n  } else if (control === Control.Lower && upperValue < minUpperValue) {\n    upperValue = minUpperValue;\n  }\n\n  return [lowerValue, upperValue];\n\n  function inBoundsUpper(value) {\n    const lowerMin = min + step;\n\n    if (value < lowerMin) {\n      return lowerMin;\n    } else if (value > max) {\n      return max;\n    } else {\n      return value;\n    }\n  }\n\n  function inBoundsLower(value) {\n    const upperMax = max - step;\n\n    if (value < min) {\n      return min;\n    } else if (value > upperMax) {\n      return upperMax;\n    } else {\n      return value;\n    }\n  }\n\n  function roundedToStep(value) {\n    return Math.round(value / step) * step;\n  }\n}\n\nexport { DualThumb };\n"]},"metadata":{},"sourceType":"module"}