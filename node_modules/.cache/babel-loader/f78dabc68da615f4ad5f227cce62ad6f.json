{"ast":null,"code":"import _classCallCheck from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport React$1, { Component } from 'react';\nimport { objectWithoutProperties as _objectWithoutProperties } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport debounce$1 from 'lodash/debounce';\nimport { StickyManagerContext } from '../../utilities/sticky-manager/context.js';\nimport { scrollable } from '../shared.js';\nimport { StickyManager } from '../../utilities/sticky-manager/sticky-manager.js';\nimport { classNames } from '../../utilities/css.js';\nimport { ScrollableContext } from './context.js';\nimport { ScrollTo as ScrollTo$1 } from './components/ScrollTo/ScrollTo.js';\nimport styles from './Scrollable.scss.js';\nvar MAX_SCROLL_DISTANCE = 100;\nvar DELTA_THRESHOLD = 0.2;\nvar DELTA_PERCENTAGE = 0.2;\nvar EVENTS_TO_LOCK = ['scroll', 'touchmove', 'wheel'];\nvar PREFERS_REDUCED_MOTION = prefersReducedMotion();\n\nvar Scrollable = /*#__PURE__*/function (_Component) {\n  _inherits(Scrollable, _Component);\n\n  var _super = _createSuper(Scrollable);\n\n  function Scrollable() {\n    var _this;\n\n    _classCallCheck(this, Scrollable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      topShadow: false,\n      bottomShadow: false,\n      scrollPosition: 0,\n      canScroll: false\n    };\n    _this.stickyManager = new StickyManager();\n    _this.scrollArea = null;\n    _this.handleResize = debounce$1(function () {\n      _this.handleScroll();\n    }, 50, {\n      trailing: true\n    });\n\n    _this.setScrollArea = function (scrollArea) {\n      _this.scrollArea = scrollArea;\n    };\n\n    _this.handleScroll = function () {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          scrollArea = _assertThisInitialize.scrollArea;\n\n      var _this$props2 = _this.props,\n          shadow = _this$props2.shadow,\n          onScrolledToBottom = _this$props2.onScrolledToBottom;\n\n      if (scrollArea == null) {\n        return;\n      }\n\n      var scrollTop = scrollArea.scrollTop,\n          clientHeight = scrollArea.clientHeight,\n          scrollHeight = scrollArea.scrollHeight;\n      var shouldBottomShadow = Boolean(shadow && !(scrollTop + clientHeight >= scrollHeight));\n      var shouldTopShadow = Boolean(shadow && scrollTop > 0);\n      var canScroll = scrollHeight > clientHeight;\n      var hasScrolledToBottom = scrollHeight - scrollTop === clientHeight;\n\n      if (canScroll && hasScrolledToBottom && onScrolledToBottom) {\n        onScrolledToBottom();\n      }\n\n      _this.setState({\n        topShadow: shouldTopShadow,\n        bottomShadow: shouldBottomShadow,\n        scrollPosition: scrollTop,\n        canScroll: canScroll\n      });\n    };\n\n    _this.scrollHint = function () {\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          scrollArea = _assertThisInitialize2.scrollArea;\n\n      if (scrollArea == null) {\n        return;\n      }\n\n      var clientHeight = scrollArea.clientHeight,\n          scrollHeight = scrollArea.scrollHeight;\n\n      if (PREFERS_REDUCED_MOTION || _this.state.scrollPosition > 0 || scrollHeight <= clientHeight) {\n        return;\n      }\n\n      var scrollDistance = scrollHeight - clientHeight;\n\n      _this.toggleLock();\n\n      _this.setState({\n        scrollPosition: scrollDistance > MAX_SCROLL_DISTANCE ? MAX_SCROLL_DISTANCE : scrollDistance\n      }, function () {\n        window.requestAnimationFrame(_this.scrollStep);\n      });\n    };\n\n    _this.scrollStep = function () {\n      _this.setState(function (_ref) {\n        var scrollPosition = _ref.scrollPosition;\n        var delta = scrollPosition * DELTA_PERCENTAGE;\n        return {\n          scrollPosition: delta < DELTA_THRESHOLD ? 0 : scrollPosition - delta\n        };\n      }, function () {\n        if (_this.state.scrollPosition > 0) {\n          window.requestAnimationFrame(_this.scrollStep);\n        } else {\n          _this.toggleLock(false);\n        }\n      });\n    };\n\n    _this.scrollToPosition = function (scrollY) {\n      _this.setState({\n        scrollPosition: scrollY\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Scrollable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.scrollArea == null) {\n        return;\n      }\n\n      this.stickyManager.setContainer(this.scrollArea);\n      this.scrollArea.addEventListener('scroll', function () {\n        window.requestAnimationFrame(_this2.handleScroll);\n      });\n      window.addEventListener('resize', this.handleResize);\n      window.requestAnimationFrame(function () {\n        _this2.handleScroll();\n\n        if (_this2.props.hint) {\n          _this2.scrollHint();\n        }\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.scrollArea == null) {\n        return;\n      }\n\n      this.scrollArea.removeEventListener('scroll', this.handleScroll);\n      window.removeEventListener('resize', this.handleResize);\n      this.stickyManager.removeScrollListener();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var scrollPosition = this.state.scrollPosition;\n\n      if (scrollPosition && this.scrollArea && scrollPosition > 0) {\n        this.scrollArea.scrollTop = scrollPosition;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          topShadow = _this$state.topShadow,\n          bottomShadow = _this$state.bottomShadow,\n          canScroll = _this$state.canScroll;\n\n      var _this$props = this.props,\n          children = _this$props.children,\n          className = _this$props.className,\n          horizontal = _this$props.horizontal,\n          _this$props$vertical = _this$props.vertical,\n          vertical = _this$props$vertical === void 0 ? true : _this$props$vertical,\n          shadow = _this$props.shadow,\n          hint = _this$props.hint,\n          focusable = _this$props.focusable,\n          onScrolledToBottom = _this$props.onScrolledToBottom,\n          rest = _objectWithoutProperties(_this$props, [\"children\", \"className\", \"horizontal\", \"vertical\", \"shadow\", \"hint\", \"focusable\", \"onScrolledToBottom\"]);\n\n      var finalClassName = classNames(className, styles.Scrollable, vertical && styles.vertical, horizontal && styles.horizontal, topShadow && styles.hasTopShadow, bottomShadow && styles.hasBottomShadow, vertical && canScroll && styles.verticalHasScrolling);\n      return /*#__PURE__*/React$1.createElement(ScrollableContext.Provider, {\n        value: this.scrollToPosition\n      }, /*#__PURE__*/React$1.createElement(StickyManagerContext.Provider, {\n        value: this.stickyManager\n      }, /*#__PURE__*/React$1.createElement(\"div\", Object.assign({\n        className: finalClassName\n      }, scrollable.props, rest, {\n        ref: this.setScrollArea // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n        ,\n        tabIndex: focusable ? 0 : undefined\n      }), children)));\n    }\n  }, {\n    key: \"toggleLock\",\n    value: function toggleLock() {\n      var shouldLock = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var scrollArea = this.scrollArea;\n\n      if (scrollArea == null) {\n        return;\n      }\n\n      EVENTS_TO_LOCK.forEach(function (eventName) {\n        if (shouldLock) {\n          scrollArea.addEventListener(eventName, prevent);\n        } else {\n          scrollArea.removeEventListener(eventName, prevent);\n        }\n      });\n    }\n  }], [{\n    key: \"forNode\",\n    value: function forNode(node) {\n      var closestElement = node.closest(scrollable.selector);\n      return closestElement instanceof HTMLElement ? closestElement : document;\n    }\n  }]);\n\n  return Scrollable;\n}(Component);\n\nScrollable.ScrollTo = ScrollTo$1;\n\nfunction prevent(evt) {\n  evt.preventDefault();\n}\n\nfunction prefersReducedMotion() {\n  try {\n    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n  } catch (err) {\n    return false;\n  }\n}\n\nexport { Scrollable };","map":{"version":3,"sources":["/home/hoangdev/Desktop/front.test/node_modules/@shopify/polaris/dist/esm/components/Scrollable/Scrollable.js"],"names":["React$1","Component","objectWithoutProperties","_objectWithoutProperties","debounce$1","StickyManagerContext","scrollable","StickyManager","classNames","ScrollableContext","ScrollTo","ScrollTo$1","styles","MAX_SCROLL_DISTANCE","DELTA_THRESHOLD","DELTA_PERCENTAGE","EVENTS_TO_LOCK","PREFERS_REDUCED_MOTION","prefersReducedMotion","Scrollable","args","state","topShadow","bottomShadow","scrollPosition","canScroll","stickyManager","scrollArea","handleResize","handleScroll","trailing","setScrollArea","props","shadow","onScrolledToBottom","scrollTop","clientHeight","scrollHeight","shouldBottomShadow","Boolean","shouldTopShadow","hasScrolledToBottom","setState","scrollHint","scrollDistance","toggleLock","window","requestAnimationFrame","scrollStep","delta","scrollToPosition","scrollY","setContainer","addEventListener","hint","removeEventListener","removeScrollListener","_this$props","children","className","horizontal","vertical","focusable","rest","finalClassName","hasTopShadow","hasBottomShadow","verticalHasScrolling","createElement","Provider","value","Object","assign","ref","tabIndex","undefined","shouldLock","forEach","eventName","prevent","node","closestElement","closest","selector","HTMLElement","document","evt","preventDefault","matchMedia","matches","err"],"mappings":"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","sourcesContent":["import React$1, { Component } from 'react';\nimport { objectWithoutProperties as _objectWithoutProperties } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport debounce$1 from 'lodash/debounce';\nimport { StickyManagerContext } from '../../utilities/sticky-manager/context.js';\nimport { scrollable } from '../shared.js';\nimport { StickyManager } from '../../utilities/sticky-manager/sticky-manager.js';\nimport { classNames } from '../../utilities/css.js';\nimport { ScrollableContext } from './context.js';\nimport { ScrollTo as ScrollTo$1 } from './components/ScrollTo/ScrollTo.js';\nimport styles from './Scrollable.scss.js';\n\nconst MAX_SCROLL_DISTANCE = 100;\nconst DELTA_THRESHOLD = 0.2;\nconst DELTA_PERCENTAGE = 0.2;\nconst EVENTS_TO_LOCK = ['scroll', 'touchmove', 'wheel'];\nconst PREFERS_REDUCED_MOTION = prefersReducedMotion();\nclass Scrollable extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      topShadow: false,\n      bottomShadow: false,\n      scrollPosition: 0,\n      canScroll: false\n    };\n    this.stickyManager = new StickyManager();\n    this.scrollArea = null;\n    this.handleResize = debounce$1(() => {\n      this.handleScroll();\n    }, 50, {\n      trailing: true\n    });\n\n    this.setScrollArea = scrollArea => {\n      this.scrollArea = scrollArea;\n    };\n\n    this.handleScroll = () => {\n      const {\n        scrollArea\n      } = this;\n      const {\n        shadow,\n        onScrolledToBottom\n      } = this.props;\n\n      if (scrollArea == null) {\n        return;\n      }\n\n      const {\n        scrollTop,\n        clientHeight,\n        scrollHeight\n      } = scrollArea;\n      const shouldBottomShadow = Boolean(shadow && !(scrollTop + clientHeight >= scrollHeight));\n      const shouldTopShadow = Boolean(shadow && scrollTop > 0);\n      const canScroll = scrollHeight > clientHeight;\n      const hasScrolledToBottom = scrollHeight - scrollTop === clientHeight;\n\n      if (canScroll && hasScrolledToBottom && onScrolledToBottom) {\n        onScrolledToBottom();\n      }\n\n      this.setState({\n        topShadow: shouldTopShadow,\n        bottomShadow: shouldBottomShadow,\n        scrollPosition: scrollTop,\n        canScroll\n      });\n    };\n\n    this.scrollHint = () => {\n      const {\n        scrollArea\n      } = this;\n\n      if (scrollArea == null) {\n        return;\n      }\n\n      const {\n        clientHeight,\n        scrollHeight\n      } = scrollArea;\n\n      if (PREFERS_REDUCED_MOTION || this.state.scrollPosition > 0 || scrollHeight <= clientHeight) {\n        return;\n      }\n\n      const scrollDistance = scrollHeight - clientHeight;\n      this.toggleLock();\n      this.setState({\n        scrollPosition: scrollDistance > MAX_SCROLL_DISTANCE ? MAX_SCROLL_DISTANCE : scrollDistance\n      }, () => {\n        window.requestAnimationFrame(this.scrollStep);\n      });\n    };\n\n    this.scrollStep = () => {\n      this.setState(({\n        scrollPosition\n      }) => {\n        const delta = scrollPosition * DELTA_PERCENTAGE;\n        return {\n          scrollPosition: delta < DELTA_THRESHOLD ? 0 : scrollPosition - delta\n        };\n      }, () => {\n        if (this.state.scrollPosition > 0) {\n          window.requestAnimationFrame(this.scrollStep);\n        } else {\n          this.toggleLock(false);\n        }\n      });\n    };\n\n    this.scrollToPosition = scrollY => {\n      this.setState({\n        scrollPosition: scrollY\n      });\n    };\n  }\n\n  static forNode(node) {\n    const closestElement = node.closest(scrollable.selector);\n    return closestElement instanceof HTMLElement ? closestElement : document;\n  }\n\n  componentDidMount() {\n    if (this.scrollArea == null) {\n      return;\n    }\n\n    this.stickyManager.setContainer(this.scrollArea);\n    this.scrollArea.addEventListener('scroll', () => {\n      window.requestAnimationFrame(this.handleScroll);\n    });\n    window.addEventListener('resize', this.handleResize);\n    window.requestAnimationFrame(() => {\n      this.handleScroll();\n\n      if (this.props.hint) {\n        this.scrollHint();\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.scrollArea == null) {\n      return;\n    }\n\n    this.scrollArea.removeEventListener('scroll', this.handleScroll);\n    window.removeEventListener('resize', this.handleResize);\n    this.stickyManager.removeScrollListener();\n  }\n\n  componentDidUpdate() {\n    const {\n      scrollPosition\n    } = this.state;\n\n    if (scrollPosition && this.scrollArea && scrollPosition > 0) {\n      this.scrollArea.scrollTop = scrollPosition;\n    }\n  }\n\n  render() {\n    const {\n      topShadow,\n      bottomShadow,\n      canScroll\n    } = this.state;\n\n    const _this$props = this.props,\n          {\n      children,\n      className,\n      horizontal,\n      vertical = true,\n      shadow,\n      hint,\n      focusable,\n      onScrolledToBottom\n    } = _this$props,\n          rest = _objectWithoutProperties(_this$props, [\"children\", \"className\", \"horizontal\", \"vertical\", \"shadow\", \"hint\", \"focusable\", \"onScrolledToBottom\"]);\n\n    const finalClassName = classNames(className, styles.Scrollable, vertical && styles.vertical, horizontal && styles.horizontal, topShadow && styles.hasTopShadow, bottomShadow && styles.hasBottomShadow, vertical && canScroll && styles.verticalHasScrolling);\n    return /*#__PURE__*/React$1.createElement(ScrollableContext.Provider, {\n      value: this.scrollToPosition\n    }, /*#__PURE__*/React$1.createElement(StickyManagerContext.Provider, {\n      value: this.stickyManager\n    }, /*#__PURE__*/React$1.createElement(\"div\", Object.assign({\n      className: finalClassName\n    }, scrollable.props, rest, {\n      ref: this.setScrollArea // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n      ,\n      tabIndex: focusable ? 0 : undefined\n    }), children)));\n  }\n\n  toggleLock(shouldLock = true) {\n    const {\n      scrollArea\n    } = this;\n\n    if (scrollArea == null) {\n      return;\n    }\n\n    EVENTS_TO_LOCK.forEach(eventName => {\n      if (shouldLock) {\n        scrollArea.addEventListener(eventName, prevent);\n      } else {\n        scrollArea.removeEventListener(eventName, prevent);\n      }\n    });\n  }\n\n}\nScrollable.ScrollTo = ScrollTo$1;\n\nfunction prevent(evt) {\n  evt.preventDefault();\n}\n\nfunction prefersReducedMotion() {\n  try {\n    return window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n  } catch (err) {\n    return false;\n  }\n}\n\nexport { Scrollable };\n"]},"metadata":{},"sourceType":"module"}