{"ast":null,"code":"import _classCallCheck from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _toConsumableArray from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/hoangdev/Desktop/front.test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React$1, { useRef, useCallback, useState, useEffect, useMemo, Component, createRef } from 'react';\nimport { objectWithoutProperties as _objectWithoutProperties } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport debounce$1 from 'lodash/debounce';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { isServer } from '../../utilities/target.js';\nimport { classNames, variationName } from '../../utilities/css.js';\nimport { CircleAlertMajor, DragDropMajor } from '@shopify/polaris-icons';\nimport { Icon as Icon$1 } from '../Icon/Icon.js';\nimport { VisuallyHidden as VisuallyHidden$1 } from '../VisuallyHidden/VisuallyHidden.js';\nimport { useToggle as useToggle$1 } from '../../utilities/use-toggle.js';\nimport { Stack as Stack$1 } from '../Stack/Stack.js';\nimport { Labelled as Labelled$1 } from '../Labelled/Labelled.js';\nimport { useComponentDidMount as useComponentDidMount$1 } from '../../utilities/use-component-did-mount.js';\nimport { Caption as Caption$1 } from '../Caption/Caption.js';\nimport { DisplayText as DisplayText$1 } from '../DisplayText/DisplayText.js';\nimport { capitalize as capitalize$1 } from '../../utilities/capitalize.js';\nimport { defaultAllowMultiple, fileAccepted, getDataTransferFiles, createAllowMultipleKey } from './utils/index.js';\nimport { DropZoneContext } from './context.js';\nimport { FileUpload as FileUpload$1 } from './components/FileUpload/FileUpload.js';\nimport styles from './DropZone.scss.js'; // TypeScript can't generate types that correctly infer the typing of\n// subcomponents so explicitly state the subcomponents in the type definition.\n// Letting this be implicit works in this project but fails in projects that use\n// generated *.d.ts files.\n\nvar DropZone = function DropZone(_ref) {\n  var dropOnPage = _ref.dropOnPage,\n      label = _ref.label,\n      labelAction = _ref.labelAction,\n      labelHidden = _ref.labelHidden,\n      children = _ref.children,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      _ref$outline = _ref.outline,\n      outline = _ref$outline === void 0 ? true : _ref$outline,\n      accept = _ref.accept,\n      active = _ref.active,\n      _ref$overlay = _ref.overlay,\n      overlay = _ref$overlay === void 0 ? true : _ref$overlay,\n      _ref$allowMultiple = _ref.allowMultiple,\n      allowMultiple = _ref$allowMultiple === void 0 ? defaultAllowMultiple : _ref$allowMultiple,\n      overlayText = _ref.overlayText,\n      errorOverlayText = _ref.errorOverlayText,\n      idProp = _ref.id,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'file' : _ref$type,\n      onClick = _ref.onClick,\n      error = _ref.error,\n      openFileDialog = _ref.openFileDialog,\n      onFileDialogClose = _ref.onFileDialogClose,\n      customValidator = _ref.customValidator,\n      onDrop = _ref.onDrop,\n      onDropAccepted = _ref.onDropAccepted,\n      onDropRejected = _ref.onDropRejected,\n      onDragEnter = _ref.onDragEnter,\n      onDragOver = _ref.onDragOver,\n      onDragLeave = _ref.onDragLeave;\n  var node = useRef(null);\n  var dragTargets = useRef([]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  var adjustSize = useCallback(debounce$1(function () {\n    if (!node.current) {\n      return;\n    }\n\n    var size = 'extraLarge';\n    var width = node.current.getBoundingClientRect().width;\n\n    if (width < 100) {\n      size = 'small';\n    } else if (width < 160) {\n      size = 'medium';\n    } else if (width < 300) {\n      size = 'large';\n    }\n\n    setSize(size);\n    measuring && setMeasuring(false);\n  }, 50, {\n    trailing: true\n  }), []);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      dragging = _useState2[0],\n      setDragging = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      internalError = _useState4[0],\n      setInternalError = _useState4[1];\n\n  var _useToggle$ = useToggle$1(false),\n      focused = _useToggle$.value,\n      handleFocus = _useToggle$.setTrue,\n      handleBlur = _useToggle$.setFalse;\n\n  var _useState5 = useState('extraLarge'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      size = _useState6[0],\n      setSize = _useState6[1];\n\n  var _useState7 = useState(true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      measuring = _useState8[0],\n      setMeasuring = _useState8[1];\n\n  var i18n = useI18n();\n  var getValidatedFiles = useCallback(function (files) {\n    var acceptedFiles = [];\n    var rejectedFiles = [];\n    Array.from(files).forEach(function (file) {\n      !fileAccepted(file, accept) || customValidator && !customValidator(file) ? rejectedFiles.push(file) : acceptedFiles.push(file);\n    });\n\n    if (!allowMultiple) {\n      acceptedFiles.splice(1, acceptedFiles.length);\n      rejectedFiles.push.apply(rejectedFiles, _toConsumableArray(acceptedFiles.slice(1)));\n    }\n\n    return {\n      files: files,\n      acceptedFiles: acceptedFiles,\n      rejectedFiles: rejectedFiles\n    };\n  }, [accept, allowMultiple, customValidator]);\n  var handleDrop = useCallback(function (event) {\n    stopEvent(event);\n    if (disabled) return;\n    var fileList = getDataTransferFiles(event);\n\n    var _getValidatedFiles = getValidatedFiles(fileList),\n        files = _getValidatedFiles.files,\n        acceptedFiles = _getValidatedFiles.acceptedFiles,\n        rejectedFiles = _getValidatedFiles.rejectedFiles;\n\n    dragTargets.current = [];\n    setDragging(false);\n    setInternalError(rejectedFiles.length > 0);\n    onDrop && onDrop(files, acceptedFiles, rejectedFiles);\n    onDropAccepted && acceptedFiles.length && onDropAccepted(acceptedFiles);\n    onDropRejected && rejectedFiles.length && onDropRejected(rejectedFiles);\n    event.target.value = '';\n  }, [disabled, getValidatedFiles, onDrop, onDropAccepted, onDropRejected]);\n  var handleDragEnter = useCallback(function (event) {\n    stopEvent(event);\n    if (disabled) return;\n    var fileList = getDataTransferFiles(event);\n\n    if (event.target && !dragTargets.current.includes(event.target)) {\n      dragTargets.current.push(event.target);\n    }\n\n    if (dragging) return;\n\n    var _getValidatedFiles2 = getValidatedFiles(fileList),\n        rejectedFiles = _getValidatedFiles2.rejectedFiles;\n\n    setDragging(true);\n    setInternalError(rejectedFiles.length > 0);\n    onDragEnter && onDragEnter();\n  }, [disabled, dragging, getValidatedFiles, onDragEnter]);\n  var handleDragOver = useCallback(function (event) {\n    stopEvent(event);\n    if (disabled) return;\n    onDragOver && onDragOver();\n  }, [disabled, onDragOver]);\n  var handleDragLeave = useCallback(function (event) {\n    event.preventDefault();\n    if (disabled) return;\n    dragTargets.current = dragTargets.current.filter(function (el) {\n      var compareNode = dropOnPage && !isServer ? document : node.current;\n      return el !== event.target && compareNode && compareNode.contains(el);\n    });\n    if (dragTargets.current.length > 0) return;\n    setDragging(false);\n    setInternalError(false);\n    onDragLeave && onDragLeave();\n  }, [dropOnPage, disabled, onDragLeave]);\n  useEffect(function () {\n    var dropNode = dropOnPage ? document : node.current;\n    if (!dropNode) return;\n    dropNode.addEventListener('drop', handleDrop);\n    dropNode.addEventListener('dragover', handleDragOver);\n    dropNode.addEventListener('dragenter', handleDragEnter);\n    dropNode.addEventListener('dragleave', handleDragLeave);\n    window.addEventListener('resize', adjustSize);\n    return function () {\n      dropNode.removeEventListener('drop', handleDrop);\n      dropNode.removeEventListener('dragover', handleDragOver);\n      dropNode.removeEventListener('dragenter', handleDragEnter);\n      dropNode.removeEventListener('dragleave', handleDragLeave);\n      window.removeEventListener('resize', adjustSize);\n    };\n  }, [dropOnPage, handleDrop, handleDragOver, handleDragEnter, handleDragLeave, adjustSize]);\n  useComponentDidMount$1(function () {\n    adjustSize();\n  });\n  var id = useUniqueId('DropZone', idProp);\n  var typeSuffix = capitalize$1(type);\n  var allowMultipleKey = createAllowMultipleKey(allowMultiple);\n  var overlayTextWithDefault = overlayText === undefined ? i18n.translate(\"Polaris.DropZone.\".concat(allowMultipleKey, \".overlayText\").concat(typeSuffix)) : overlayText;\n  var errorOverlayTextWithDefault = errorOverlayText === undefined ? i18n.translate(\"Polaris.DropZone.errorOverlayText\".concat(typeSuffix)) : errorOverlayText;\n  var labelValue = label || i18n.translate(\"Polaris.DropZone.\".concat(allowMultipleKey, \".label\").concat(typeSuffix));\n  var labelHiddenValue = label ? labelHidden : true;\n  var inputAttributes = {\n    id: id,\n    accept: accept,\n    disabled: disabled,\n    type: 'file',\n    multiple: allowMultiple,\n    onChange: handleDrop,\n    onFocus: handleFocus,\n    onBlur: handleBlur\n  };\n  var classes = classNames(styles.DropZone, outline && styles.hasOutline, focused && styles.focused, (active || dragging) && styles.isDragging, disabled && styles.isDisabled, (internalError || error) && styles.hasError, styles[variationName('size', size)], measuring && styles.measuring);\n  var dragOverlay = (active || dragging) && (!internalError || !error) && overlay && overlayMarkup(DragDropMajor, 'primary', overlayTextWithDefault);\n  var dragErrorOverlay = dragging && (internalError || error) && overlayMarkup(CircleAlertMajor, 'critical', errorOverlayTextWithDefault);\n  var context = useMemo(function () {\n    return {\n      disabled: disabled,\n      focused: focused,\n      size: size,\n      type: type || 'file',\n      measuring: measuring,\n      allowMultiple: allowMultiple\n    };\n  }, [disabled, focused, measuring, size, type, allowMultiple]);\n  return /*#__PURE__*/React$1.createElement(DropZoneContext.Provider, {\n    value: context\n  }, /*#__PURE__*/React$1.createElement(Labelled$1, {\n    id: id,\n    label: labelValue,\n    action: labelAction,\n    labelHidden: labelHiddenValue\n  }, /*#__PURE__*/React$1.createElement(\"div\", {\n    ref: node,\n    className: classes,\n    \"aria-disabled\": disabled,\n    onClick: handleClick,\n    onDragStart: stopEvent\n  }, dragOverlay, dragErrorOverlay, /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Container\n  }, children), /*#__PURE__*/React$1.createElement(VisuallyHidden$1, null, /*#__PURE__*/React$1.createElement(DropZoneInput, Object.assign({}, inputAttributes, {\n    openFileDialog: openFileDialog,\n    onFileDialogClose: onFileDialogClose\n  }))))));\n\n  function overlayMarkup(icon, color, text) {\n    return /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Overlay\n    }, /*#__PURE__*/React$1.createElement(Stack$1, {\n      vertical: true,\n      spacing: \"tight\"\n    }, /*#__PURE__*/React$1.createElement(Icon$1, {\n      source: icon,\n      color: color\n    }), size === 'extraLarge' && /*#__PURE__*/React$1.createElement(DisplayText$1, {\n      size: \"small\",\n      element: \"p\"\n    }, text), (size === 'medium' || size === 'large') && /*#__PURE__*/React$1.createElement(Caption$1, null, text)));\n  }\n\n  function open() {\n    var fileInputNode = node.current && node.current.querySelector(\"#\".concat(id));\n    fileInputNode && fileInputNode instanceof HTMLElement && fileInputNode.click();\n  }\n\n  function handleClick(event) {\n    if (disabled) return;\n    return onClick ? onClick(event) : open();\n  }\n};\n\nfunction stopEvent(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nDropZone.FileUpload = FileUpload$1; // Due to security reasons, browsers do not allow file inputs to be opened artificially.\n// For example `useEffect(() => { ref.click() })`. Oddly enough react class-based components bi-pass this.\n\nvar DropZoneInput = /*#__PURE__*/function (_Component) {\n  _inherits(DropZoneInput, _Component);\n\n  var _super = _createSuper(DropZoneInput);\n\n  function DropZoneInput() {\n    var _this;\n\n    _classCallCheck(this, DropZoneInput);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.fileInputNode = /*#__PURE__*/createRef();\n\n    _this.triggerFileDialog = function () {\n      _this.open();\n\n      _this.props.onFileDialogClose && _this.props.onFileDialogClose();\n    };\n\n    _this.open = function () {\n      if (!_this.fileInputNode.current) return;\n\n      _this.fileInputNode.current.click();\n    };\n\n    return _this;\n  }\n\n  _createClass(DropZoneInput, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.openFileDialog && this.triggerFileDialog();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.props.openFileDialog && this.triggerFileDialog();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          inputProps = _objectWithoutProperties(_this$props, [\"openFileDialog\", \"onFileDialogClose\"]);\n\n      return /*#__PURE__*/React$1.createElement(\"input\", Object.assign({}, inputProps, {\n        ref: this.fileInputNode,\n        autoComplete: \"off\"\n      }));\n    }\n  }]);\n\n  return DropZoneInput;\n}(Component);\n\nexport { DropZone };","map":{"version":3,"sources":["/home/hoangdev/Desktop/front.test/node_modules/@shopify/polaris/dist/esm/components/DropZone/DropZone.js"],"names":["React$1","useRef","useCallback","useState","useEffect","useMemo","Component","createRef","objectWithoutProperties","_objectWithoutProperties","debounce$1","useUniqueId","useI18n","isServer","classNames","variationName","CircleAlertMajor","DragDropMajor","Icon","Icon$1","VisuallyHidden","VisuallyHidden$1","useToggle","useToggle$1","Stack","Stack$1","Labelled","Labelled$1","useComponentDidMount","useComponentDidMount$1","Caption","Caption$1","DisplayText","DisplayText$1","capitalize","capitalize$1","defaultAllowMultiple","fileAccepted","getDataTransferFiles","createAllowMultipleKey","DropZoneContext","FileUpload","FileUpload$1","styles","DropZone","dropOnPage","label","labelAction","labelHidden","children","disabled","outline","accept","active","overlay","allowMultiple","overlayText","errorOverlayText","idProp","id","type","onClick","error","openFileDialog","onFileDialogClose","customValidator","onDrop","onDropAccepted","onDropRejected","onDragEnter","onDragOver","onDragLeave","node","dragTargets","adjustSize","current","size","width","getBoundingClientRect","setSize","measuring","setMeasuring","trailing","dragging","setDragging","internalError","setInternalError","focused","value","handleFocus","setTrue","handleBlur","setFalse","i18n","getValidatedFiles","files","acceptedFiles","rejectedFiles","Array","from","forEach","file","push","splice","length","slice","handleDrop","event","stopEvent","fileList","target","handleDragEnter","includes","handleDragOver","handleDragLeave","preventDefault","filter","el","compareNode","document","contains","dropNode","addEventListener","window","removeEventListener","typeSuffix","allowMultipleKey","overlayTextWithDefault","undefined","translate","errorOverlayTextWithDefault","labelValue","labelHiddenValue","inputAttributes","multiple","onChange","onFocus","onBlur","classes","hasOutline","isDragging","isDisabled","hasError","dragOverlay","overlayMarkup","dragErrorOverlay","context","createElement","Provider","action","ref","className","handleClick","onDragStart","Container","DropZoneInput","Object","assign","icon","color","text","Overlay","vertical","spacing","source","element","open","fileInputNode","querySelector","HTMLElement","click","stopPropagation","args","triggerFileDialog","props","_this$props","inputProps","autoComplete"],"mappings":"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","sourcesContent":["import React$1, { useRef, useCallback, useState, useEffect, useMemo, Component, createRef } from 'react';\nimport { objectWithoutProperties as _objectWithoutProperties } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport debounce$1 from 'lodash/debounce';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { isServer } from '../../utilities/target.js';\nimport { classNames, variationName } from '../../utilities/css.js';\nimport { CircleAlertMajor, DragDropMajor } from '@shopify/polaris-icons';\nimport { Icon as Icon$1 } from '../Icon/Icon.js';\nimport { VisuallyHidden as VisuallyHidden$1 } from '../VisuallyHidden/VisuallyHidden.js';\nimport { useToggle as useToggle$1 } from '../../utilities/use-toggle.js';\nimport { Stack as Stack$1 } from '../Stack/Stack.js';\nimport { Labelled as Labelled$1 } from '../Labelled/Labelled.js';\nimport { useComponentDidMount as useComponentDidMount$1 } from '../../utilities/use-component-did-mount.js';\nimport { Caption as Caption$1 } from '../Caption/Caption.js';\nimport { DisplayText as DisplayText$1 } from '../DisplayText/DisplayText.js';\nimport { capitalize as capitalize$1 } from '../../utilities/capitalize.js';\nimport { defaultAllowMultiple, fileAccepted, getDataTransferFiles, createAllowMultipleKey } from './utils/index.js';\nimport { DropZoneContext } from './context.js';\nimport { FileUpload as FileUpload$1 } from './components/FileUpload/FileUpload.js';\nimport styles from './DropZone.scss.js';\n\n// TypeScript can't generate types that correctly infer the typing of\n// subcomponents so explicitly state the subcomponents in the type definition.\n// Letting this be implicit works in this project but fails in projects that use\n// generated *.d.ts files.\nconst DropZone = function DropZone({\n  dropOnPage,\n  label,\n  labelAction,\n  labelHidden,\n  children,\n  disabled = false,\n  outline = true,\n  accept,\n  active,\n  overlay = true,\n  allowMultiple = defaultAllowMultiple,\n  overlayText,\n  errorOverlayText,\n  id: idProp,\n  type = 'file',\n  onClick,\n  error,\n  openFileDialog,\n  onFileDialogClose,\n  customValidator,\n  onDrop,\n  onDropAccepted,\n  onDropRejected,\n  onDragEnter,\n  onDragOver,\n  onDragLeave\n}) {\n  const node = useRef(null);\n  const dragTargets = useRef([]); // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  const adjustSize = useCallback(debounce$1(() => {\n    if (!node.current) {\n      return;\n    }\n\n    let size = 'extraLarge';\n    const width = node.current.getBoundingClientRect().width;\n\n    if (width < 100) {\n      size = 'small';\n    } else if (width < 160) {\n      size = 'medium';\n    } else if (width < 300) {\n      size = 'large';\n    }\n\n    setSize(size);\n    measuring && setMeasuring(false);\n  }, 50, {\n    trailing: true\n  }), []);\n  const [dragging, setDragging] = useState(false);\n  const [internalError, setInternalError] = useState(false);\n  const {\n    value: focused,\n    setTrue: handleFocus,\n    setFalse: handleBlur\n  } = useToggle$1(false);\n  const [size, setSize] = useState('extraLarge');\n  const [measuring, setMeasuring] = useState(true);\n  const i18n = useI18n();\n  const getValidatedFiles = useCallback(files => {\n    const acceptedFiles = [];\n    const rejectedFiles = [];\n    Array.from(files).forEach(file => {\n      !fileAccepted(file, accept) || customValidator && !customValidator(file) ? rejectedFiles.push(file) : acceptedFiles.push(file);\n    });\n\n    if (!allowMultiple) {\n      acceptedFiles.splice(1, acceptedFiles.length);\n      rejectedFiles.push(...acceptedFiles.slice(1));\n    }\n\n    return {\n      files,\n      acceptedFiles,\n      rejectedFiles\n    };\n  }, [accept, allowMultiple, customValidator]);\n  const handleDrop = useCallback(event => {\n    stopEvent(event);\n    if (disabled) return;\n    const fileList = getDataTransferFiles(event);\n    const {\n      files,\n      acceptedFiles,\n      rejectedFiles\n    } = getValidatedFiles(fileList);\n    dragTargets.current = [];\n    setDragging(false);\n    setInternalError(rejectedFiles.length > 0);\n    onDrop && onDrop(files, acceptedFiles, rejectedFiles);\n    onDropAccepted && acceptedFiles.length && onDropAccepted(acceptedFiles);\n    onDropRejected && rejectedFiles.length && onDropRejected(rejectedFiles);\n    event.target.value = '';\n  }, [disabled, getValidatedFiles, onDrop, onDropAccepted, onDropRejected]);\n  const handleDragEnter = useCallback(event => {\n    stopEvent(event);\n    if (disabled) return;\n    const fileList = getDataTransferFiles(event);\n\n    if (event.target && !dragTargets.current.includes(event.target)) {\n      dragTargets.current.push(event.target);\n    }\n\n    if (dragging) return;\n    const {\n      rejectedFiles\n    } = getValidatedFiles(fileList);\n    setDragging(true);\n    setInternalError(rejectedFiles.length > 0);\n    onDragEnter && onDragEnter();\n  }, [disabled, dragging, getValidatedFiles, onDragEnter]);\n  const handleDragOver = useCallback(event => {\n    stopEvent(event);\n    if (disabled) return;\n    onDragOver && onDragOver();\n  }, [disabled, onDragOver]);\n  const handleDragLeave = useCallback(event => {\n    event.preventDefault();\n    if (disabled) return;\n    dragTargets.current = dragTargets.current.filter(el => {\n      const compareNode = dropOnPage && !isServer ? document : node.current;\n      return el !== event.target && compareNode && compareNode.contains(el);\n    });\n    if (dragTargets.current.length > 0) return;\n    setDragging(false);\n    setInternalError(false);\n    onDragLeave && onDragLeave();\n  }, [dropOnPage, disabled, onDragLeave]);\n  useEffect(() => {\n    const dropNode = dropOnPage ? document : node.current;\n    if (!dropNode) return;\n    dropNode.addEventListener('drop', handleDrop);\n    dropNode.addEventListener('dragover', handleDragOver);\n    dropNode.addEventListener('dragenter', handleDragEnter);\n    dropNode.addEventListener('dragleave', handleDragLeave);\n    window.addEventListener('resize', adjustSize);\n    return () => {\n      dropNode.removeEventListener('drop', handleDrop);\n      dropNode.removeEventListener('dragover', handleDragOver);\n      dropNode.removeEventListener('dragenter', handleDragEnter);\n      dropNode.removeEventListener('dragleave', handleDragLeave);\n      window.removeEventListener('resize', adjustSize);\n    };\n  }, [dropOnPage, handleDrop, handleDragOver, handleDragEnter, handleDragLeave, adjustSize]);\n  useComponentDidMount$1(() => {\n    adjustSize();\n  });\n  const id = useUniqueId('DropZone', idProp);\n  const typeSuffix = capitalize$1(type);\n  const allowMultipleKey = createAllowMultipleKey(allowMultiple);\n  const overlayTextWithDefault = overlayText === undefined ? i18n.translate(`Polaris.DropZone.${allowMultipleKey}.overlayText${typeSuffix}`) : overlayText;\n  const errorOverlayTextWithDefault = errorOverlayText === undefined ? i18n.translate(`Polaris.DropZone.errorOverlayText${typeSuffix}`) : errorOverlayText;\n  const labelValue = label || i18n.translate(`Polaris.DropZone.${allowMultipleKey}.label${typeSuffix}`);\n  const labelHiddenValue = label ? labelHidden : true;\n  const inputAttributes = {\n    id,\n    accept,\n    disabled,\n    type: 'file',\n    multiple: allowMultiple,\n    onChange: handleDrop,\n    onFocus: handleFocus,\n    onBlur: handleBlur\n  };\n  const classes = classNames(styles.DropZone, outline && styles.hasOutline, focused && styles.focused, (active || dragging) && styles.isDragging, disabled && styles.isDisabled, (internalError || error) && styles.hasError, styles[variationName('size', size)], measuring && styles.measuring);\n  const dragOverlay = (active || dragging) && (!internalError || !error) && overlay && overlayMarkup(DragDropMajor, 'primary', overlayTextWithDefault);\n  const dragErrorOverlay = dragging && (internalError || error) && overlayMarkup(CircleAlertMajor, 'critical', errorOverlayTextWithDefault);\n  const context = useMemo(() => ({\n    disabled,\n    focused,\n    size,\n    type: type || 'file',\n    measuring,\n    allowMultiple\n  }), [disabled, focused, measuring, size, type, allowMultiple]);\n  return /*#__PURE__*/React$1.createElement(DropZoneContext.Provider, {\n    value: context\n  }, /*#__PURE__*/React$1.createElement(Labelled$1, {\n    id: id,\n    label: labelValue,\n    action: labelAction,\n    labelHidden: labelHiddenValue\n  }, /*#__PURE__*/React$1.createElement(\"div\", {\n    ref: node,\n    className: classes,\n    \"aria-disabled\": disabled,\n    onClick: handleClick,\n    onDragStart: stopEvent\n  }, dragOverlay, dragErrorOverlay, /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Container\n  }, children), /*#__PURE__*/React$1.createElement(VisuallyHidden$1, null, /*#__PURE__*/React$1.createElement(DropZoneInput, Object.assign({}, inputAttributes, {\n    openFileDialog: openFileDialog,\n    onFileDialogClose: onFileDialogClose\n  }))))));\n\n  function overlayMarkup(icon, color, text) {\n    return /*#__PURE__*/React$1.createElement(\"div\", {\n      className: styles.Overlay\n    }, /*#__PURE__*/React$1.createElement(Stack$1, {\n      vertical: true,\n      spacing: \"tight\"\n    }, /*#__PURE__*/React$1.createElement(Icon$1, {\n      source: icon,\n      color: color\n    }), size === 'extraLarge' && /*#__PURE__*/React$1.createElement(DisplayText$1, {\n      size: \"small\",\n      element: \"p\"\n    }, text), (size === 'medium' || size === 'large') && /*#__PURE__*/React$1.createElement(Caption$1, null, text)));\n  }\n\n  function open() {\n    const fileInputNode = node.current && node.current.querySelector(`#${id}`);\n    fileInputNode && fileInputNode instanceof HTMLElement && fileInputNode.click();\n  }\n\n  function handleClick(event) {\n    if (disabled) return;\n    return onClick ? onClick(event) : open();\n  }\n};\n\nfunction stopEvent(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nDropZone.FileUpload = FileUpload$1;\n\n// Due to security reasons, browsers do not allow file inputs to be opened artificially.\n// For example `useEffect(() => { ref.click() })`. Oddly enough react class-based components bi-pass this.\nclass DropZoneInput extends Component {\n  constructor(...args) {\n    super(...args);\n    this.fileInputNode = /*#__PURE__*/createRef();\n\n    this.triggerFileDialog = () => {\n      this.open();\n      this.props.onFileDialogClose && this.props.onFileDialogClose();\n    };\n\n    this.open = () => {\n      if (!this.fileInputNode.current) return;\n      this.fileInputNode.current.click();\n    };\n  }\n\n  componentDidMount() {\n    this.props.openFileDialog && this.triggerFileDialog();\n  }\n\n  componentDidUpdate() {\n    this.props.openFileDialog && this.triggerFileDialog();\n  }\n\n  render() {\n    const _this$props = this.props,\n          inputProps = _objectWithoutProperties(_this$props, [\"openFileDialog\", \"onFileDialogClose\"]);\n\n    return /*#__PURE__*/React$1.createElement(\"input\", Object.assign({}, inputProps, {\n      ref: this.fileInputNode,\n      autoComplete: \"off\"\n    }));\n  }\n\n}\n\nexport { DropZone };\n"]},"metadata":{},"sourceType":"module"}